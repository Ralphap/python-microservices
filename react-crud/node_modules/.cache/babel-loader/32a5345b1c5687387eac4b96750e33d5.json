{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphaelboateng-amponsah/react-crud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphaelboateng-amponsah/react-crud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphaelboateng-amponsah/react-crud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';var Main=function Main(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://localhost:8001/api/products');case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setProducts(data);case 7:case\"end\":return _context.stop();}}},_callee);}))();},[]);var like=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8001/api/products/\".concat(id,\"/like\"),{method:'POST',headers:{'Content-Type':'application/json'}});case 2:setProducts(products.map(function(p){if(p.id===id){p.likes++;}return p;}));case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function like(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"main\",{role:\"main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"album py-5 bg-light\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},products.map(function(p){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\",key:p.id},/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-4 shadow-sm\"},/*#__PURE__*/React.createElement(\"img\",{src:p.image,height:\"180\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},p.title),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-outline-secondary\",onClick:function onClick(){return like(p.id);}},\"Like\")),/*#__PURE__*/React.createElement(\"small\",{className:\"text-muted\"},p.likes,\" likes\")))));})))));};export default Main;","map":{"version":3,"sources":["/Users/raphaelboateng-amponsah/react-crud/src/main/Main.tsx"],"names":["React","useEffect","useState","Main","products","setProducts","fetch","response","json","data","like","id","method","headers","map","p","likes","image","title"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CAGA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,eACiBD,QAAQ,CAAC,EAAD,CADzB,wCACRE,QADQ,eACEC,WADF,eAGfJ,SAAS,CAAC,UAAM,CACZ,wDACI,2KAC2BK,CAAAA,KAAK,CAAC,oCAAD,CADhC,QACUC,QADV,qCAGuBA,CAAAA,QAAQ,CAACC,IAAT,EAHvB,QAGUC,IAHV,eAKIJ,WAAW,CAACI,IAAD,CAAX,CALJ,sDADJ,KASH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAMC,CAAAA,IAAI,2FAAG,kBAAOC,EAAP,6IACHL,CAAAA,KAAK,8CAAuCK,EAAvC,UAAkD,CACzDC,MAAM,CAAE,MADiD,CAEzDC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFgD,CAAlD,CADF,QAMTR,WAAW,CAACD,QAAQ,CAACU,GAAT,CACR,SAACC,CAAD,CAAgB,CACZ,GAAIA,CAAC,CAACJ,EAAF,GAASA,EAAb,CAAiB,CACbI,CAAC,CAACC,KAAF,GACH,CAED,MAAOD,CAAAA,CAAP,CACH,CAPO,CAAD,CAAX,CANS,wDAAH,kBAAJL,CAAAA,IAAI,6CAAV,CAiBA,mBACI,4BAAM,IAAI,CAAC,MAAX,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,2BAAK,SAAS,CAAC,KAAf,EACKN,QAAQ,CAACU,GAAT,CACG,SAACC,CAAD,CAAgB,CACZ,mBACI,2BAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAEA,CAAC,CAACJ,EAAjC,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,GAAG,CAAEI,CAAC,CAACE,KAAZ,CAAmB,MAAM,CAAC,KAA1B,EADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,yBAAG,SAAS,CAAC,WAAb,EAA0BF,CAAC,CAACG,KAA5B,CADJ,cAEI,2BAAK,SAAS,CAAC,mDAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,8BAAQ,IAAI,CAAC,QAAb,CACQ,SAAS,CAAC,kCADlB,CAEQ,OAAO,CAAE,yBAAMR,CAAAA,IAAI,CAACK,CAAC,CAACJ,EAAH,CAAV,EAFjB,SADJ,CADJ,cASI,6BAAO,SAAS,CAAC,YAAjB,EAA+BI,CAAC,CAACC,KAAjC,UATJ,CAFJ,CAFJ,CADJ,CADJ,CAqBH,CAvBJ,CADL,CADJ,CADJ,CADJ,CADJ,CAoCH,CApED,CAsEA,cAAeb,CAAAA,IAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {Product} from \"../interfaces/product\";\n\nconst Main = () => {\n    const [products, setProducts] = useState([] as Product[]);\n\n    useEffect(() => {\n        (\n            async () => {\n                const response = await fetch('http://localhost:8001/api/products');\n\n                const data = await response.json();\n\n                setProducts(data);\n            }\n        )();\n    }, []);\n\n    const like = async (id: number) => {\n        await fetch(`http://localhost:8001/api/products/${id}/like`, {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'}\n        });\n\n        setProducts(products.map(\n            (p: Product) => {\n                if (p.id === id) {\n                    p.likes++;\n                }\n\n                return p;\n            }\n        ));\n    }\n\n    return (\n        <main role=\"main\">\n            <div className=\"album py-5 bg-light\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        {products.map(\n                            (p: Product) => {\n                                return (\n                                    <div className=\"col-md-4\" key={p.id}>\n                                        <div className=\"card mb-4 shadow-sm\">\n                                            <img src={p.image} height=\"180\"/>\n                                            <div className=\"card-body\">\n                                                <p className=\"card-text\">{p.title}</p>\n                                                <div className=\"d-flex justify-content-between align-items-center\">\n                                                    <div className=\"btn-group\">\n                                                        <button type=\"button\"\n                                                                className=\"btn btn-sm btn-outline-secondary\"\n                                                                onClick={() => like(p.id)}\n                                                        >\n                                                            Like\n                                                        </button>\n                                                    </div>\n                                                    <small className=\"text-muted\">{p.likes} likes</small>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )\n                            }\n                        )}\n                    </div>\n                </div>\n            </div>\n\n        </main>\n    );\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}