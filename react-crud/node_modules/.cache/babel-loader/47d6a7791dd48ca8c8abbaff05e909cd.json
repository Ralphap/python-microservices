{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphaelboateng-amponsah/react-crud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphaelboateng-amponsah/react-crud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphaelboateng-amponsah/react-crud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Wrapper from\"./Wrapper\";import{Redirect}from'react-router-dom';var ProductsEdit=function ProductsEdit(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,product;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8000/api/products/\".concat(props.match.params.id));case 2:response=_context.sent;_context.next=5;return response.json();case 5:product=_context.sent;setTitle(product.title);setImage(product.image);case 8:case\"end\":return _context.stop();}}},_callee);}))();},[]);var submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return fetch(\"http://localhost:8000/api/products/\".concat(props.match.params.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:title,image:image})});case 3:setRedirect(true);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();if(redirect){return/*#__PURE__*/React.createElement(Redirect,{to:'/admin/products'});}return/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:submit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Title\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"title\",defaultValue:title,onChange:function onChange(e){return setTitle(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Image\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"image\",defaultValue:image,onChange:function onChange(e){return setImage(e.target.value);}})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-secondary\"},\"Save\")));};export default ProductsEdit;","map":{"version":3,"sources":["/Users/raphaelboateng-amponsah/react-crud/src/admin/ProductsEdit.tsx"],"names":["React","useEffect","useState","Wrapper","Redirect","ProductsEdit","props","title","setTitle","image","setImage","redirect","setRedirect","fetch","match","params","id","response","json","product","submit","e","preventDefault","method","headers","body","JSON","stringify","target","value"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAA6CC,SAA7C,CAAwDC,QAAxD,KAAuE,OAAvE,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CAGA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAA8B,eACrBJ,QAAQ,CAAC,EAAD,CADa,wCACxCK,KADwC,eACjCC,QADiC,8BAErBN,QAAQ,CAAC,EAAD,CAFa,yCAExCO,KAFwC,eAEjCC,QAFiC,8BAGfR,QAAQ,CAAC,KAAD,CAHO,yCAGxCS,QAHwC,eAG9BC,WAH8B,eAK/CX,SAAS,CAAC,UAAM,CACZ,wDACI,8KAC2BY,CAAAA,KAAK,8CAAuCP,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmBC,EAA1D,EADhC,QACUC,QADV,qCAGmCA,CAAAA,QAAQ,CAACC,IAAT,EAHnC,QAGUC,OAHV,eAKIX,QAAQ,CAACW,OAAO,CAACZ,KAAT,CAAR,CACAG,QAAQ,CAACS,OAAO,CAACV,KAAT,CAAR,CANJ,sDADJ,KAUH,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAMW,CAAAA,MAAM,2FAAG,kBAAOC,CAAP,sHACXA,CAAC,CAACC,cAAF,GADW,uBAGLT,CAAAA,KAAK,8CAAuCP,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmBC,EAA1D,EAAgE,CACvEO,MAAM,CAAE,KAD+D,CAEvEC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAF8D,CAGvEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBpB,KAAK,CAALA,KADiB,CAEjBE,KAAK,CAALA,KAFiB,CAAf,CAHiE,CAAhE,CAHA,QAYXG,WAAW,CAAC,IAAD,CAAX,CAZW,wDAAH,kBAANQ,CAAAA,MAAM,6CAAZ,CAeA,GAAIT,QAAJ,CAAc,CACV,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAE,iBAAd,EAAP,CACH,CAED,mBACI,oBAAC,OAAD,mBACI,4BAAM,QAAQ,CAAES,MAAhB,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,yCADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,IAAI,CAAC,OAAjD,CACO,YAAY,CAAEb,KADrB,CAEO,QAAQ,CAAE,kBAAAc,CAAC,QAAIb,CAAAA,QAAQ,CAACa,CAAC,CAACO,MAAF,CAASC,KAAV,CAAZ,EAFlB,EAFJ,CADJ,cAQI,2BAAK,SAAS,CAAC,YAAf,eACI,yCADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,IAAI,CAAC,OAAjD,CACO,YAAY,CAAEpB,KADrB,CAEO,QAAQ,CAAE,kBAAAY,CAAC,QAAIX,CAAAA,QAAQ,CAACW,CAAC,CAACO,MAAF,CAASC,KAAV,CAAZ,EAFlB,EAFJ,CARJ,cAeI,8BAAQ,SAAS,CAAC,2BAAlB,SAfJ,CADJ,CADJ,CAqBH,CA1DD,CA4DA,cAAexB,CAAAA,YAAf","sourcesContent":["import React, {PropsWithRef, SyntheticEvent, useEffect, useState} from 'react';\nimport Wrapper from \"./Wrapper\";\nimport {Redirect} from 'react-router-dom';\nimport {Product} from \"../interfaces/product\";\n\nconst ProductsEdit = (props: PropsWithRef<any>) => {\n    const [title, setTitle] = useState('');\n    const [image, setImage] = useState('');\n    const [redirect, setRedirect] = useState(false);\n\n    useEffect(() => {\n        (\n            async () => {\n                const response = await fetch(`http://localhost:8000/api/products/${props.match.params.id}`);\n\n                const product: Product = await response.json();\n\n                setTitle(product.title);\n                setImage(product.image)\n            }\n        )();\n    }, []);\n\n    const submit = async (e: SyntheticEvent) => {\n        e.preventDefault();\n\n        await fetch(`http://localhost:8000/api/products/${props.match.params.id}`, {\n            method: 'PUT',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n                title,\n                image\n            })\n        });\n\n        setRedirect(true);\n    }\n\n    if (redirect) {\n        return <Redirect to={'/admin/products'}/>\n    }\n\n    return (\n        <Wrapper>\n            <form onSubmit={submit}>\n                <div className=\"form-group\">\n                    <label>Title</label>\n                    <input type=\"text\" className=\"form-control\" name=\"title\"\n                           defaultValue={title}\n                           onChange={e => setTitle(e.target.value)}\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>Image</label>\n                    <input type=\"text\" className=\"form-control\" name=\"image\"\n                           defaultValue={image}\n                           onChange={e => setImage(e.target.value)}\n                    />\n                </div>\n                <button className=\"btn btn-outline-secondary\">Save</button>\n            </form>\n        </Wrapper>\n    );\n};\n\nexport default ProductsEdit;\n"]},"metadata":{},"sourceType":"module"}